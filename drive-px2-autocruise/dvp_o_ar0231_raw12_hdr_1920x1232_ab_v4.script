#
#  Copyright (c) 2016-2017, NVIDIA CORPORATION.  All rights reserved.
#
#  NVIDIA Corporation and its licensors retain all intellectual property
#  and proprietary rights in and to this software and related documentation
#  and any modifications thereto.  Any use, reproduction, disclosure or
#  distribution of this software and related documentation without an express
#  license agreement from NVIDIA Corporation is strictly prohibited.
#
# Capture Config Parameters
; Interface: csi-ab
; Input Format: raw12
; Resolution: 1920x1232 #1920x1208, +24 lines top embedded data
; CSI Lanes: 4
; I2C Device: 7
; Sensor Address: 0x20
; Deserializer Address: 0x90
; Pixel Order: GRBG

# Serializer Address: 0x80

90 3F 4F
; Delay 2ms
90 3B 1E
; Delay 2ms
90 0A FF
80 04 43
; Delay 5ms
80 08 01
80 97 5F
; Delay 2ms
90 3B 19
; Delay 2ms

90 15 03
90 12 F7    #DBL=1, CSI_DBL=1
90 01 00    #frame sync on, manual
90 00 EF

90 06 55    #88MHz, 30fps
90 07 C2
90 08 2C

90 63 00
90 64 00
90 1C 06    #HIBW=1

; Delay 2ms
80 07 C4    #DBL=1, HIBW = 1, rising edge
; Delay 2ms
80 44 00    #vsync delay
; Delay 2ms
80 45 9C
; Delay 5ms
80 46 80
80 47 00    #vsync high
80 48 b0
80 49 00
80 43 21    #eanble vsync re-gen
80 67 C4    #align at HS rising edge

90 34 36

# sensor initial AR0231 for V4
# Disable Streaming
20 301A 10 58 # RESET_REGISTER
; Delay 1ms
# Exposure control
20 3362 00 00 # C_GAIN 1.0
20 3364 00 60 # DCG_TRIM
20 3366 77 77 # A_GAIN 1.0
20 3308 02 00 # D_GAIN 1.0
20 3012 03 00 # COARSE_INTEGRATION_TIME_
20 3212 00 30 # COARSE_INTEGRATION_TIME_2
20 3216 00 03 # COARSE_INTEGRATION_TIME_3
20 321A 00 00 # COARSE_INTEGRATION_TIME_4
# WB control
20 3056 00 80 # GREEN_R_GAIN
20 3058 00 80 # BLUE_GAIN
20 305A 00 80 # RED_GAIN
20 305C 00 80 # GREEN_B_GAIN
# Design recomannended settings
20 318E 02 00 # DLO_CONTROL0
20 3230 03 17 # FINE_CORRECTION
20 3232 05 52 # FINE_CORRECTION2
20 3234 07 8d # FINE_CORRECTION3
20 32E2 38 03 # SHUT_DCG_BOOST
20 3370 02 31 # DBLC_CONTROl
20 3372 70 0F # DBLC_FS0_CONTROL
20 3386 00 00 # DBLC_PEDESTAL
20 3C04 0E 80 # RNC_BIAS
20 3F90 06 E1 # TEMPVSENS0_TMG_CTRL
20 3F92 06 E1 # TEMPVSENS1_TMG_CTRL
20 3502 08 08 # DAC_LD_2_3
20 3506 44 44 # DAC_LD_6_7
20 3508 44 44 # DAC_LD_8_9
20 350A 44 65 # DAC_LD_10_11
20 350C 05 5F # DAC_LD_12_13
20 350E FF 10 # DAC_LD_14_15
20 3510 00 00 # DAC_LD_16_17
20 3514 01 06 # DAC_LD_20_21
20 3518 1F FE # DAC_LD_24_25
20 3520 C6 88 # DAC_LD_32_33
20 3522 88 C0 # DAC_LD_34_35
20 3524 C0 C6 # DAC_LD_36_37
20 3528 99 99 # DAC_LD_40_41
20 352A 08 9F # DAC_LD_42_43
20 352C C6 C6 # DAC_LD_44_45
20 352E 00 11 # DAC_LD_46_47
20 3530 44 00 # DAC_LD_48_49
20 3536 FF 06 # DAC_LD_54_55
20 3538 FF FF # DAC_LD_56_57
20 353A 90 00 # DAC_LD_58_59
20 353C 3F 00 # DAC_LD_60_61
20 3540 C6 37 # DAC_LD_64_65, Fix vertical color lines issue
20 3542 46 4B # DAC_LD_66_67
20 3544 4B 5A # DAC_LD_68_69
20 3546 5A 5A # DAC_LD_70_71
20 3548 64 00 # DAC_LD_72_73
20 3550 0E 28 # DAC_LD_80_81
20 3556 10 1F # DAC_LD_86_87
#Sequencer for V4
20 2512 80 00 # SEQ_CTRL_PORT
20 2510 09 05 # SEQ_DATA_PORT
20 2510 33 50
20 2510 20 04
20 2510 14 60
20 2510 15 78
20 2510 13 60
20 2510 7b 24
20 2510 ff 24
20 2510 ff 24
20 2510 ea 24
20 2510 10 22
20 2510 24 10
20 2510 15 5a
20 2510 13 42
20 2510 14 00
20 2510 24 ff
20 2510 24 ff
20 2510 24 ea
20 2510 23 24
20 2510 64 7a
20 2510 24 04
20 2510 05 2c
20 2510 40 0a
20 2510 ff 0a
20 2510 ff 0a
20 2510 04 08
20 2510 38 51
20 2510 14 40
20 2510 00 04
20 2510 08 01
20 2510 04 08
20 2510 11 80
20 2510 15 dc
20 2510 13 4c
20 2510 10 02
20 2510 10 16
20 2510 11 81
20 2510 11 89
20 2510 10 56
20 2510 12 10
20 2510 09 01
20 2510 0d 08
20 2510 09 13
20 2510 13 c8
20 2510 09 2b
20 2510 15 88
20 2510 13 88
20 2510 09 0b
20 2510 11 d9
20 2510 09 1d
20 2510 14 41
20 2510 09 03
20 2510 12 14
20 2510 09 01
20 2510 10 d6
20 2510 12 10
20 2510 12 12
20 2510 12 10
20 2510 11 dd
20 2510 11 d9
20 2510 10 56
20 2510 09 0b
20 2510 11 db
20 2510 09 15
20 2510 11 9b
20 2510 09 0f
20 2510 11 bb
20 2510 12 1a
20 2510 12 10
20 2510 14 60
20 2510 12 50
20 2510 10 76
20 2510 10 e6
20 2510 09 01
20 2510 15 ab
20 2510 09 01
20 2510 13 a8
20 2510 12 40
20 2510 12 60
20 2510 09 23
20 2510 15 8d
20 2510 13 8d
20 2510 09 01
20 2510 0b 09
20 2510 01 08
20 2510 09 01
20 2510 14 40
20 2510 09 1d
20 2510 15 88
20 2510 13 88
20 2510 09 2d
20 2510 10 66
20 2510 09 05
20 2510 0c 08
20 2510 09 0b
20 2510 14 41
20 2510 09 0d
20 2510 10 e6
20 2510 09 01
20 2510 12 62
20 2510 12 60
20 2510 11 bf
20 2510 11 bb
20 2510 10 66
20 2510 11 fb
20 2510 09 35
20 2510 11 bb
20 2510 12 63
20 2510 12 60
20 2510 14 00
20 2510 15 10
20 2510 11 b8
20 2510 12 a0
20 2510 12 00
20 2510 10 26
20 2510 10 00
20 2510 13 42
20 2510 11 00
20 2510 7a 06
20 2510 09 26
20 2510 05 07
20 2510 08 41
20 2510 37 50
20 2510 2c 2c
20 2510 fe 02
20 2510 fe 14
# Sensor Setup
20 32D0 3A 02
20 32D2 35 08
20 32D4 37 02
20 32D6 3C 04
20 32DC 37 0A
# PLL 27MHz In -88MHz out
20 302A 00 09 # VT_PIX_CLK_DIV
20 302C 00 01 # VT_SYS_CLK_DIV
20 302E 00 03 # PRE_PLL_CLK_DIV
20 3030 00 58 # PLL_MULTIPLIER
20 3036 00 08 # OP_WORD_CLK_DIV
20 3038 00 01 # OP_SYS_CLK_DIV
20 30B0 0B 02 # DIGITAL_TEST2
# Readout Mode Configuration
20 3044 04 00 # DARK_CONTROL
20 3064 19 02 # SMIA_TEST, enable TOP EMB
20 3180 00 80 # DELTA_DK_CONTROL
20 33E0 00 80 # TEST_ASIL_ROWS, 08 80
20 33E4 00 00 # VERT_SHADING_CONTROL
20 3042 00 00 # EXTRA_DELAY
# Timing
20 3400 00 10
20 3402 0F 10
20 3404 09 70
# 3 exp Timing
20 3082 00 08 # OPERATION_MODE_CTRL
20 30BA 11 E2 # DIGITAL_CTRL
# Exposure
20 3238 87 77 # EXPOSURE_RATIO, use_reg
20 3014 07 5E # FINE_INTEGRATION_TIME_
20 321E 07 5E # FINE_INTEGRATION_TIME2
20 3222 07 5E # FINE_INTEGRATION_TIME3
20 3226 07 5E # FINE_INTEGRATION_TIME4
20 32EA 3C 0E # SHUT_CTRL
20 32EC 72 A1 # SHUT_CTRL2
# GPIO control # ENABLE GPIO3 to trigger fsync
20 340A 00 77 # GPIO_CONTROL1
20 340C 00 80 # GPIO_CONTROL2
20 30CE 01 20 # GRR_CONTROL1, enable synchronization
# Parallel HDR 12 bit Output
20 31D0 00 01 # COMPANDING
20 31AC 14 0C # DATA_FORMAT_BITS
20 31AE 00 01 # SERIAL_FORMAT
# 1920x1208
20 3002 00 00 # Y_ADDR_START_
20 3004 00 04 # X_ADDR_START_
20 3006 04 B7 # Y_ADDR_END_    y:1208
20 3008 07 83 # X_ADDR_END_    x:1920
20 300A 05 4A # VTS 1354
20 300C 08 72 # HTS 2162
20 3566 33 28 # DAC_LD_102_103
20 301A 19 DC # RESET_REGISTER
#end of init sensor

90 34 B6
80 06 AC # preemphasis setting 6.0 dB by default
; Delay 5ms
80 04 83
; Delay 5ms
90 00 E1
90 15 0F
